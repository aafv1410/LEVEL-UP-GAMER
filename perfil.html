<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Perfil - Level-Up Gamer</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <script src="js/bootstrap.bundle.min.js"></script>
  <style>
    .form-section {
      background-color: #111111;
      border: 1px solid #1E90FF;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .btn-levelup {
      background-color: #1E90FF;
      color: #fff;
      border-radius: 30px;
    }
    .btn-levelup:hover {
      background-color: #39FF14;
      color: #000;
    }
  </style>
</head>
<body class="bg-dark text-white">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html"><img src="img/Imagen1.png" alt="logo"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="catalogo.html">Catálogo</a></li>
          <li class="nav-item"><a class="nav-link active" href="perfil.html">Mi cuenta</a></li>
          <li class="nav-item"><a class="nav-link" href="blogs.html">Blogs</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Perfil -->
  <div class="container my-5">
    <h2 class="text-primary text-center mb-4">Perfil</h2>
    
    <!-- Información Personal -->
    <div class="form-section">
      <h4 class="text-info">Información Personal</h4>
      <form id="perfilForm">
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre Completo</label>
          <input type="text" class="form-control" id="nombre" required>
        </div>

        <div class="mb-3">
          <label for="correo" class="form-label">Correo Electrónico</label>
          <input type="email" class="form-control" id="correo" required>
        </div>

        <div class="mb-3">
          <label for="usuario" class="form-label">Nombre de Usuario</label>
          <input type="text" class="form-control" id="usuario" required>
        </div>

        <div class="mb-3">
          <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
          <input type="date" class="form-control" id="fechaNacimiento" required>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Contraseña</label>
          <input type="password" class="form-control" id="password" placeholder="(dejar en blanco para no cambiar)">
        </div>

        <button type="submit" class="btn btn-levelup w-100">Actualizar Información</button>
      </form>
    </div>

    <!-- Preferencias de Compra -->
    <div class="form-section">
      <h4 class="text-info">Preferencias de Compra</h4>
      <form id="preferenciasForm">
        <div class="mb-3">
          <label class="form-label">Categorías Favoritas</label><br>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="Juegos de Mesa" id="catJuegos">
            <label class="form-check-label" for="catJuegos">Juegos de Mesa</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="Accesorios" id="catAccesorios">
            <label class="form-check-label" for="catAccesorios">Accesorios</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="Consolas" id="catConsolas">
            <label class="form-check-label" for="catConsolas">Consolas</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="Computadores Gamers" id="catPC">
            <label class="form-check-label" for="catPC">Computadores Gamers</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="Sillas Gamers" id="catSillas">
            <label class="form-check-label" for="catSillas">Sillas Gamers</label>
          </div>
        </div>


        <button type="submit" class="btn btn-levelup w-100">Guardar Preferencias</button>
      </form>
    </div>
  </div>

  <script>
    // Cargar datos guardados al iniciar
    window.onload = function() {
      const usuario = JSON.parse(localStorage.getItem("usuarioRegistrado")) || {};
      const preferencias = JSON.parse(localStorage.getItem("preferenciasUsuario")) || {};

      if(usuario.nombre) document.getElementById("nombre").value = usuario.nombre;
      if(usuario.correo) document.getElementById("correo").value = usuario.correo;
      if(usuario.usuario) document.getElementById("usuario").value = usuario.usuario;
      if(usuario.fechaNacimiento) document.getElementById("fechaNacimiento").value = usuario.fechaNacimiento;

      // preferencias
      if(preferencias.categorias){
        preferencias.categorias.forEach(cat => {
          const checkbox = document.querySelector(`input[value='${cat}']`);
          if(checkbox) checkbox.checked = true;
        });
      }
      if(preferencias.notificaciones){
        document.getElementById("notificaciones").value = preferencias.notificaciones;
      }
    };

    // Actualizar información personal
    document.getElementById("perfilForm").addEventListener("submit", function(e){
      e.preventDefault();

      let usuario = JSON.parse(localStorage.getItem("usuarioRegistrado")) || {};

      usuario.nombre = document.getElementById("nombre").value.trim();
      usuario.correo = document.getElementById("correo").value.trim();
      usuario.usuario = document.getElementById("usuario").value.trim();
      usuario.fechaNacimiento = document.getElementById("fechaNacimiento").value;
      
      const nuevaPass = document.getElementById("password").value;
      if(nuevaPass.length >= 6) usuario.password = nuevaPass; // Solo cambia si cumple

      localStorage.setItem("usuarioRegistrado", JSON.stringify(usuario));
      alert("✅ Información actualizada con éxito");
    });

    // Guardar preferencias
    document.getElementById("preferenciasForm").addEventListener("submit", function(e){
      e.preventDefault();

      const categorias = [];
      document.querySelectorAll("#preferenciasForm input[type=checkbox]:checked").forEach(c => {
        categorias.push(c.value);
      });

      const preferencias = {
        categorias: categorias,
        notificaciones: document.getElementById("notificaciones").value
      };

      localStorage.setItem("preferenciasUsuario", JSON.stringify(preferencias));
      alert("✅ Preferencias guardadas con éxito");
    });
  </script>
</body>
</html>
